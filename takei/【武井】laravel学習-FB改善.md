# laravel学習において、エネスさんから指摘を貰ったものの蓄積

## 武井への指摘分

### テーブル設計

- 複数形のテーブルに対して単数形のカラム名を付けるのはあまり良くない。(命名的な気持ち悪さの問題で、postsであれば、postというカラムは少しおかしいという感じで)
  - commentsテーブルに対して、commentというカラムは少しおかしい。contentがよい
- マイグレーションファイルを作成する前に、テーブル間の関係性を示す表を作成するべき。
  - commentsテーブルに対して、post_idが存在していなかった。ということがあった


### エロクワントの作成について

- 集計以外では、Join/selectはほぼ禁止。使い勝ってが悪いし、編集しにくいし、読みにくいので
 - 上記の通り、使い勝手の悪さ・編集のしにくさ・読みにくさがある
 - モデル間のリレーションを貼っているのに、それを利用していないのが、よくなかった

### モデルの作成について

- Relationの定義
- attributeの定義
- 複雑なロジックでデータを取るとき(ただし、モデルに入れるかコントローラーに記載するかはその都度考えるべき)

### コントローラーの作成について

- キーと変数名が一致しているなら、compact()を利用する
  - 確認すべき項目が減る、可読性も上がる
  - 変数名とキーが一致するので、フロントとサーバーの行き来する際に探す時に困らない（ 'blog' =>$post にした場合を想像してほしい ）
  - 変数名とキーを一致させる意識が生まれる。

- 他に使用/改造する予定がなければ、最初からrender/viewの中で定義をする
Before
```
 public function show(Post $post) 
	 { 
	     $post = $post->load('user'); 
	     $comments = $post->comments()->with('user')->get(); 
	     return Inertia::render('Posts/Show',['post' => $post, 'comments' => $comments]); 
	 } 
```

After
```
 public function show(Post $post) 
	 { 
	       return Inertia::render('Posts/Show',[
                  'post' => $post->load('user'),
                  'comments' =>  $post->comments()->with('user')->get()
        ]); 
	 } 
```
メリットは下記の通り
- 返っている変数名をみて→変数の定義を見る、という行動がなくなる
- キーと定義に変数の仲介がないので、キーの命名のずれが減る。例えば'blog'=>$postよりも、blog' => $post->load('user'),の方が、「結局返しているのはpostなので、キーもpostにしよう」となりやすい

#### better
`return Inertia::render('Posts/List',['posts' => Post::with('user')->get()]);`
というコードがあったら、
改行を入れて、
`return Inertia::render('Posts/List',[
    'posts' => Post::with('user')->get()
]);`
とすると良し。



### フロントの作成について
- 不要なコメント,処理は記載しない
 - チェックボックスがないのに、チェックボックスが存在したときの処理が記載されているということがあって、見づらかった
 - 他の人がコードを見た際に、〇〇は存在してないのに、〇〇を使った処理を見て、それが正しいかどうかという無駄なチェックが入る
 - コードが無駄に長くなってしまい、全体としてのみやすさが悪くなる

### ルートの作成について

- ルート名に複数形はだめではないが、推奨はできない
 - index以外は単体のものを扱うルートのため
- ルート名の最初の「/」は必要ない
 - コードの可読性を上げるため
- namesにたいしてこだわらなくてよい
 - Resourceの基本設定とまったく一緒のため

### gitのpr方法について

- laraelのインストールはコミットを分けるべき
 - コミットは1機能のみで済ませて、複数の機能をいれない。レビュワーの確認が大変になるかつ、PRが長くなるため。(詳細英太郎さんのものをもう少し確認する)


### 勉強時間の確保について

- 毎回のPR時に学習時間かつ、その学習時間に対してどこにどれぐらいの時間を割いたかを記載する
 - 細かくタスクを分解して、時間を記録することで、どこに自分が時間を費やしたかの可視化ができて、勉強方法の改善をすることができる
 - 無駄な作業をしていることに気づき、指摘ができる

### 